"use strict";(self["webpackChunkyoudianda"]=self["webpackChunkyoudianda"]||[]).push([[160],{2160:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"logincontainer"},[t("van-nav-bar",{attrs:{title:"登录","left-arrow":"",placeholder:"",fixed:""},on:{"click-left":function(t){return e.$router.go(-1)}}}),t("h1",{staticClass:"title"},[e._v("优点达资讯")]),t("van-form",{on:{submit:e.onSubmit}},[t("van-field",{attrs:{type:"Number",name:"mobile",label:"用户名",maxlength:"11","left-icon":"contact",placeholder:"请输入手机号",rules:e.rules.mobile},model:{value:e.getUserInfo.mobile,callback:function(t){e.$set(e.getUserInfo,"mobile",t)},expression:"getUserInfo.mobile"}}),t("van-field",{attrs:{type:"password",name:"password",label:"密码","left-icon":"bag",placeholder:"密码",rules:e.rules.password},model:{value:e.getUserInfo.password,callback:function(t){e.$set(e.getUserInfo,"password",t)},expression:"getUserInfo.password"}}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")]),t("router-link",{staticClass:"zhuce",attrs:{to:"/enroll"}},[e._v("没有账号，立即注册")])],1)],1)],1)},r=[],o=s(3822),n=s(4471);const l=e=>(0,n.Z)({url:"/home/index/login",method:"post",data:e});var i={name:"LoginIndex",data(){return{getUserInfo:{mobile:"",password:""},rules:{mobile:[{required:!0,message:"请填写密码"},{pattern:/^1[3|4|5|6|7|8|9]\d{9}$/,message:"手机号格式不正确"}],password:[{required:!0,message:"请填写密码"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/,message:"请填写正确密码"}]}}},methods:{...(0,o.OI)(["setUser"]),async onSubmit(){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});try{const{data:e}=await l(this.getUserInfo);if(console.log(e),0!==e.errno)return this.$toast.fail(e.errmsg);this.$toast.success(e.errmsg),this.setUser(e.data);const t=this.$route.query.url;t?this.$router.replace(t):this.$router.replace("/my")}catch(e){console.log(e)}}}},u=i,c=s(1001),d=(0,c.Z)(u,a,r,!1,null,"1abf13a6",null),f=d.exports}}]);