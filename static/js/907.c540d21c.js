"use strict";(self["webpackChunkyoudianda"]=self["webpackChunkyoudianda"]||[]).push([[907],{3907:function(t,e,r){r.r(e),r.d(e,{default:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"myArticle"},[e("van-nav-bar",{attrs:{title:"我的文章","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.error=e},load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.myArticle,(function(r,n){return e("van-swipe-cell",{key:r.id,scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{attrs:{square:"",type:"danger",text:"删除"},on:{click:function(e){return t.delFn(r.id,n)}}}),e("van-button",{attrs:{square:"",type:"primary",text:"修改"},on:{click:function(e){return t.modifyFn(r.id)}}})]},proxy:!0}],null,!0)},[e("van-cell",{staticClass:"article-item",scopedSlots:t._u([{key:"title",fn:function(){return[e("h3",{staticClass:"title"},[t._v(t._s(r.title))])]},proxy:!0},{key:"default",fn:function(){return[e("van-image",{staticClass:"right-cover",staticStyle:{"padding-top":"10px"},attrs:{fit:"cover",height:"100",width:"100%",src:"http://122.51.249.55:8060/"+r.pic}})]},proxy:!0},{key:"label",fn:function(){return[e("div",{staticClass:"cover-wrap"},[e("div",{staticClass:"describe"},[t._v(t._s(r.content))]),e("div",{staticClass:"label-info-wrap"},[e("div",[e("i",{staticClass:"fa fa-heart-o"}),e("span",[t._v("收藏("+t._s(r.lovenum)+")")])]),e("div",[e("i",{staticClass:"fa fa-thumbs-o-up",attrs:{"aria-hidden":"true"}}),e("span",[t._v("点赞("+t._s(r.click)+")")])])])])]},proxy:!0}],null,!0)})],1)})),1)],1)},a=[],i=r(2900),s={name:"myArticle",data(){return{page:1,limit:10,loading:!1,finished:!1,myArticle:[],error:!1}},methods:{async onLoad(){try{const{data:t}=await(0,i.$0)({page:this.page,limit:this.limit});console.log(t),this.myArticle.push(...t.data.data),this.loading=!1,t.data.length<10?this.finished=!0:this.page++}catch(t){console.log(t)}this.finished=!0},async delFn(t,e){const{data:r}=await(0,i.Je)({id:t});this.myArticle.splice(e,1),this.onLoad(),this.$toast.success("删除成功")},modifyFn(t){this.$router.push({path:"/public",query:{id:t}})}}},o=s,u=r(1001),l=(0,u.Z)(o,n,a,!1,null,"22bc3b3a",null),c=l.exports},2900:function(t,e,r){r.d(e,{$0:function(){return l},B:function(){return f},Je:function(){return d},Pe:function(){return c},YM:function(){return s},ZL:function(){return o},_H:function(){return i},mF:function(){return u},p8:function(){return a}});var n=r(4471);const a=()=>(0,n.Z)({url:"/home/user/getUserInfo"}),i=()=>(0,n.Z)({url:"/user/getUserInfo"}),s=t=>(0,n.Z)({url:"/user/update",method:"post",data:t}),o=t=>(0,n.Z)({url:"/home/common/upload?type=images",headers:{"Content-Type":"multipart/form-data"},method:"post",data:t}),u=t=>(0,n.Z)({url:"/user/addArticle",method:"post",data:t}),l=t=>(0,n.Z)({url:"/user/myArticle",method:"get",params:t}),c=t=>(0,n.Z)({url:"/home/user/userDataList?",method:"get",params:t}),d=t=>(0,n.Z)({url:"/home/user/delArticle",method:"get",params:t}),f=t=>(0,n.Z)({url:"/user/editArticle",method:"post",data:t})}}]);