"use strict";(self["webpackChunkyoudianda"]=self["webpackChunkyoudianda"]||[]).push([[292],{9917:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"listitem"},[e("van-nav-bar",{staticClass:"listTitle",attrs:{title:"列表","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":function(e){return t.$router.push("/category")}}}),e("van-tabs",{attrs:{animated:"",swipeable:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.categoryList,(function(t){return e("van-tab",{key:t.id,attrs:{title:t.catename,to:{path:"/list",query:{id:t.id}}}},[e("articleItem")],1)})),1)],1)},s=[],r=a(588),n=function(){var t=this,e=t._self._c;return e("div",[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.error=e},load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.articleDate,(function(t){return e("articlemessage",{key:t.id,attrs:{articleMessage:t}})})),1)],1)},l=[],c=function(){var t=this,e=t._self._c;return e("div",[e("van-cell",{staticClass:"article-item",on:{click:function(e){return t.clickFn(t.articleMessage.id)}},scopedSlots:t._u([{key:"title",fn:function(){return[e("h3",{staticClass:"title"},[t._v(t._s(t.articleMessage.title))])]},proxy:!0},{key:"default",fn:function(){return[e("van-image",{staticClass:"right-cover",attrs:{fit:"cover",src:"http://122.51.249.55:8060/"+t.articleMessage.pic}})]},proxy:!0},{key:"label",fn:function(){return[e("div",{staticClass:"cover-wrap"},[e("div",{staticClass:"describe"},[t._v(t._s(t.articleMessage.description))]),e("div",{staticClass:"label-info-wrap"},[e("div",[e("i",{staticClass:"fa fa-heart-o"}),e("span",[t._v("收藏("+t._s(t.articleMessage.lovenum)+")")])]),e("div",[e("i",{staticClass:"fa fa-thumbs-o-up",attrs:{"aria-hidden":"true"}}),e("span",[t._v("点赞("+t._s(t.articleMessage.click)+")")])])])])]},proxy:!0}])}),e("hr")],1)},o=[],d={name:"articleMessage",props:{articleMessage:{type:Object,require:!0}},created(){},methods:{clickFn(t){this.$router.push({path:"/article",query:{id:t}})}}},u=d,h=a(1001),f=(0,h.Z)(u,c,o,!1,null,"75b0d291",null),g=f.exports,p={name:"articleItem",data(){return{page:1,limit:20,loading:!1,finished:!1,articleDate:[],error:!1}},components:{articlemessage:g},created(){},methods:{async onLoad(){try{const{data:t}=await(0,r.B)({page:this.page,limit:this.limit,cateid:this.$route.query.id});console.log(t),this.page++,this.articleDate.push(...t.data.list.data),t.data.list.data.length<10&&(this.page=1,this.loading=!0)}catch(t){console.log(t)}this.finished=!0}}},v=p,m=(0,h.Z)(v,n,l,!1,null,"a804d8b2",null),y=m.exports,_={name:"articleList",data(){return{active:1*this.$route.query.ind,categoryList:[]}},created(){console.log(this.$route)},components:{articleItem:y},created(){this.getCategory()},methods:{async getCategory(){try{const{data:t}=await(0,r.r)();console.log(t),this.categoryList=t.data.allCate}catch(t){console.log(t)}}}},k=_,b=(0,h.Z)(k,i,s,!1,null,"ff7d2818",null),C=b.exports},588:function(t,e,a){a.d(e,{B:function(){return r},r:function(){return s}});var i=a(4471);const s=()=>(0,i.Z)({url:"/home/index/index",method:"get"}),r=t=>(0,i.Z)({url:"/home/index/list",method:"get",params:t})}}]);